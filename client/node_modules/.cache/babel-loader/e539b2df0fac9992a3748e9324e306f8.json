{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useEffect}from\"react\";import{Link,useSearchParams}from\"react-router-dom\";import classes from\"./ProductCategoryListDetail.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";var ProductCategoryListDetail=function ProductCategoryListDetail(_ref){var title=_ref.title,type=_ref.type,subtitle=_ref.subtitle,setProducts=_ref.setProducts;var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var type3=searchParams.get(\"type3\");// ✅ URL의 type3가 바뀔 때만 fetch\nuseEffect(function(){if(!type3)return;var fetchData2=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _res$data$result,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:5000/product/api/get/products/subcategory2?type3=\".concat(encodeURIComponent(type3)));case 3:res=_context.sent;setProducts((_res$data$result=res.data.result)!==null&&_res$data$result!==void 0?_res$data$result:[]);_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);setProducts([]);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData2(){return _ref2.apply(this,arguments);};}();fetchData2();},[type3,setProducts]);return/*#__PURE__*/_jsx(\"div\",{className:classes[\"productsCategory-categoryList-items\"],children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/categories?type=\".concat(type,\"&type2=\").concat(subtitle,\"&type3=\").concat(encodeURIComponent(title)),children:title})})});};export default ProductCategoryListDetail;","map":{"version":3,"names":["axios","React","useEffect","Link","useSearchParams","classes","ProductCategoryListDetail","title","type","subtitle","setProducts","searchParams","type3","get","fetchData2","encodeURIComponent","res","data","result","console","error"],"sources":["/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/src/components/pages/productsCategory/ProductCategoryListDetail.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useEffect } from \"react\";\nimport { Link, useSearchParams } from \"react-router-dom\";\nimport classes from \"./ProductCategoryListDetail.module.css\";\n\nconst ProductCategoryListDetail = ({ title, type, subtitle, setProducts }) => {\n  const [searchParams] = useSearchParams();\n  const type3 = searchParams.get(\"type3\");\n\n  // ✅ URL의 type3가 바뀔 때만 fetch\n  useEffect(() => {\n    if (!type3) return;\n\n    const fetchData2 = async () => {\n      try {\n        const res = await axios.get(\n          `http://localhost:5000/product/api/get/products/subcategory2?type3=${encodeURIComponent(\n            type3\n          )}`\n        );\n        setProducts(res.data.result ?? []);\n      } catch (e) {\n        console.error(e);\n        setProducts([]);\n      }\n    };\n\n    fetchData2();\n  }, [type3, setProducts]);\n\n  return (\n    <div className={classes[\"productsCategory-categoryList-items\"]}>\n      <li>\n        {/* ✅ 클릭 시 state 건드리지 말고 URL만 변경 */}\n        <Link to={`/categories?type=${type}&type2=${subtitle}&type3=${encodeURIComponent(title)}`}>\n          {title}\n        </Link>\n      </li>\n    </div>\n  );\n};\n\nexport default ProductCategoryListDetail;\n"],"mappings":"kdAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,IAAI,CAAEC,eAAe,KAAQ,kBAAkB,CACxD,MAAOC,QAAO,KAAM,wCAAwC,CAAC,2CAE7D,GAAMC,0BAAyB,CAAG,QAA5BA,0BAAyB,MAA+C,IAAzCC,MAAK,MAALA,KAAK,CAAEC,IAAI,MAAJA,IAAI,CAAEC,QAAQ,MAARA,QAAQ,CAAEC,WAAW,MAAXA,WAAW,CACrE,qBAAuBN,eAAe,EAAE,sDAAjCO,YAAY,sBACnB,GAAMC,MAAK,CAAGD,YAAY,CAACE,GAAG,CAAC,OAAO,CAAC,CAEvC;AACAX,SAAS,CAAC,UAAM,CACd,GAAI,CAACU,KAAK,CAAE,OAEZ,GAAME,WAAU,6FAAG,oMAEGd,MAAK,CAACa,GAAG,6EAC4CE,kBAAkB,CACrFH,KAAK,CACN,EACF,QAJKI,GAAG,eAKTN,WAAW,mBAACM,GAAG,CAACC,IAAI,CAACC,MAAM,qDAAI,EAAE,CAAC,CAAC,+EAEnCC,OAAO,CAACC,KAAK,aAAG,CAChBV,WAAW,CAAC,EAAE,CAAC,CAAC,oEAEnB,kBAZKI,WAAU,2CAYf,CAEDA,UAAU,EAAE,CACd,CAAC,CAAE,CAACF,KAAK,CAAEF,WAAW,CAAC,CAAC,CAExB,mBACE,YAAK,SAAS,CAAEL,OAAO,CAAC,qCAAqC,CAAE,uBAC7D,iCAEE,KAAC,IAAI,EAAC,EAAE,4BAAsBG,IAAI,mBAAUC,QAAQ,mBAAUM,kBAAkB,CAACR,KAAK,CAAC,CAAG,UACvFA,KAAK,EACD,EACJ,EACD,CAEV,CAAC,CAED,cAAeD,0BAAyB"},"metadata":{},"sourceType":"module"}