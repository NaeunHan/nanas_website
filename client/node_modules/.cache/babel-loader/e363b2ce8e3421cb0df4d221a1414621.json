{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import Pagination from\"react-js-pagination\";import{Link}from\"react-router-dom\";import classes from\"./AdminBoard.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminBoard=function AdminBoard(_ref){var boardList=_ref.boardList,setReset=_ref.setReset,onDetailBoard=_ref.onDetailBoard;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrntPage=_useState2[1];// 현재페이지\nvar _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),indexOfLastQnA=_useState4[0],setIndexOfLastQnA=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),indexOfFirstQnA=_useState6[0],setIndexOfFirstQnA=_useState6[1];var perPage=10;useEffect(function(){// pagination --------------------------------------------------------------------\nsetIndexOfLastQnA(currentPage*perPage);setIndexOfFirstQnA(indexOfLastQnA-perPage);},[currentPage,indexOfFirstQnA,indexOfLastQnA,perPage]);var deleteContent=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(bId){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"http://localhost:5000/admin/api/delete/boardContent\",{bId:bId}).then(function(response){alert(response.data);setReset(function(prev){return!prev;});});case 2:case\"end\":return _context.stop();}}},_callee);}));return function deleteContent(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:classes.adminOrder,children:[/*#__PURE__*/_jsx(\"h3\",{className:classes[\"adminOrder-title\"],children:\"\\uAC8C\\uC2DC\\uD310\\uAD00\\uB9AC\"}),/*#__PURE__*/_jsxs(\"table\",{className:classes[\"adminOrder-orderList\"],children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uD0C0\\uC785\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC791\\uC131\\uC790\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC81C\\uBAA9 / \\uC0C1\\uD488\\uBA85\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC791\\uC131\\uC77C\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC0AD\\uC81C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:boardList.slice(indexOfFirstQnA,indexOfLastQnA).map(function(it,bId){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:it.bId}),/*#__PURE__*/_jsx(\"td\",{children:it.bBoardtype}),/*#__PURE__*/_jsx(\"td\",{children:it.uId}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/products/\"+it.productId,children:it.bTitle.substring(0,8)+\"...\"})}),/*#__PURE__*/_jsx(\"td\",{children:it.bContent.substring(0,8)+\"...\"}),/*#__PURE__*/_jsx(\"td\",{children:it.bWriteDate}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:classes[\"adminOrder-orderList-search\"],onClick:function onClick(){return onDetailBoard(it);},children:\"\\uC870\\uD68C\"}),/*#__PURE__*/_jsx(\"button\",{className:classes[\"adminOrder-orderList-search\"],onClick:function onClick(){return deleteContent(it.bId);},children:\"\\uC0AD\\uC81C\"})]})]},bId);})})]}),/*#__PURE__*/_jsx(Pagination,{activePage:currentPage// 현재 페이지\n,itemsCountPerPage:perPage// 한페이지당 보여줄 아이템 갯수\n,totalItemsCount:boardList.length// 총 아이템 갯수\n,pageRangeDisplayed:5// 페이지네이터 내에서 보여줄 페이지 범위\n,prevPageText:\"<\",nextPageText:\">\",onChange:setCurrntPage// 페이지가 바뀔때 핸들링해주는 함수\n})]});};export default AdminBoard;","map":{"version":3,"names":["axios","React","useEffect","useState","Pagination","Link","classes","AdminBoard","boardList","setReset","onDetailBoard","currentPage","setCurrntPage","indexOfLastQnA","setIndexOfLastQnA","indexOfFirstQnA","setIndexOfFirstQnA","perPage","deleteContent","bId","post","then","response","alert","data","prev","adminOrder","slice","map","it","bBoardtype","uId","productId","bTitle","substring","bContent","bWriteDate","length"],"sources":["/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/src/components/pages/admin/AdminBoard.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport Pagination from \"react-js-pagination\";\nimport { Link } from \"react-router-dom\";\n\nimport classes from \"./AdminBoard.module.css\";\n\nconst AdminBoard = ({ boardList, setReset, onDetailBoard }) => {\n  const [currentPage, setCurrntPage] = useState(1); // 현재페이지\n  const [indexOfLastQnA, setIndexOfLastQnA] = useState(0);\n  const [indexOfFirstQnA, setIndexOfFirstQnA] = useState(0);\n  const perPage = 10;\n\n  useEffect(() => {\n    // pagination --------------------------------------------------------------------\n    setIndexOfLastQnA(currentPage * perPage);\n    setIndexOfFirstQnA(indexOfLastQnA - perPage);\n  }, [currentPage, indexOfFirstQnA, indexOfLastQnA, perPage]);\n  const deleteContent = async (bId) => {\n    await axios\n      .post(\"http://localhost:5000/admin/api/delete/boardContent\", { bId })\n      .then((response) => {\n        alert(response.data);\n        setReset((prev) => !prev);\n      });\n  };\n  return (\n    <div className={classes.adminOrder}>\n      <h3 className={classes[\"adminOrder-title\"]}>게시판관리</h3>\n\n      <table className={classes[\"adminOrder-orderList\"]}>\n        <thead>\n          <tr>\n            <th>No.</th>\n            <th>타입</th>\n            <th>작성자</th>\n            <th>제목 / 상품명</th>\n            <th>내용</th>\n            {/* <th>주소</th> */}\n            <th>작성일</th>\n            <th>삭제</th>\n          </tr>\n        </thead>\n        <tbody>\n          {boardList.slice(indexOfFirstQnA, indexOfLastQnA).map((it, bId) => (\n            <tr key={bId}>\n              <td>{it.bId}</td>\n              <td>{it.bBoardtype}</td>\n              <td>{it.uId}</td>\n              <td>\n                <Link to={`/products/` + it.productId}>\n                  {it.bTitle.substring(0, 8) + \"...\"}\n                </Link>\n              </td>\n              <td>{it.bContent.substring(0, 8) + \"...\"}</td>\n              {/* <td>{`${it.addr} [${it.oZipcode}]  ${it.oAdditionalAddr}`}</td> */}\n              <td>{it.bWriteDate}</td>\n              <td>\n                <button\n                  className={classes[\"adminOrder-orderList-search\"]}\n                  onClick={() => onDetailBoard(it)}\n                >\n                  조회\n                </button>\n                <button\n                  className={classes[\"adminOrder-orderList-search\"]}\n                  onClick={() => deleteContent(it.bId)}\n                >\n                  삭제\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <Pagination\n        activePage={currentPage} // 현재 페이지\n        itemsCountPerPage={perPage} // 한페이지당 보여줄 아이템 갯수\n        totalItemsCount={boardList.length} // 총 아이템 갯수\n        pageRangeDisplayed={5} // 페이지네이터 내에서 보여줄 페이지 범위\n        prevPageText={\"<\"}\n        nextPageText={\">\"}\n        onChange={setCurrntPage} // 페이지가 바뀔때 핸들링해주는 함수\n      />\n    </div>\n  );\n};\n\nexport default AdminBoard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}