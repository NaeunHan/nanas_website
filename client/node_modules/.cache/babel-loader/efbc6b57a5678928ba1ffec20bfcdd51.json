{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import MyPageAddressAdd from\"./MyPageAddressAdd\";import MyPageAddressItem from\"./MyPageAddressItem\";import MyPageListTitle from\"./MyPageListTitle\";import MyPageNullMsg from\"./MyPageNullMsg\";import{getUser}from\"../../../util/getUser\";import{authCheck}from\"../../../util/authCheck\";import classes from\"./MyPageAddress.module.css\";import Pagination from\"react-js-pagination\";import DefaultAddr from\"./DefaultAddr\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MyPageAddress=function MyPageAddress(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];//유저 정보 받아오는 곳\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),addUser=_useState4[0],setAddUser=_useState4[1];// 추가 된 주소 저장\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),reset=_useState6[0],setReset=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),addAddress=_useState8[0],setAddAddress=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),currentPage=_useState10[0],setCurrntPage=_useState10[1];// 현재페이지\nvar _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),indexOfLastQnA=_useState12[0],setIndexOfLastQnA=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),indexOfFirstQnA=_useState14[0],setIndexOfFirstQnA=_useState14[1];var _useState15=useState(3),_useState16=_slicedToArray(_useState15,2),perPage=_useState16[0],setPerPage=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),choicedefault=_useState18[0],setChoiceDefault=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),updateState=_useState20[0],setUpdateSate=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),targetNum=_useState22[0],setTargetNum=_useState22[1];useEffect(function(){authCheck();getUser(setUser);var addlist=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:5000/mypage/api/addlist\",{withCredentials:true}).then(function(listRes){if(listRes.data.status===200){setAddUser(listRes.data.user);}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function addlist(){return _ref.apply(this,arguments);};}();addlist();setIndexOfLastQnA(currentPage*perPage);setIndexOfFirstQnA(indexOfLastQnA-perPage);},[reset,currentPage,indexOfFirstQnA,indexOfLastQnA,perPage]);var getNum=function getNum(e){setUpdateSate(true);setTargetNum(e.target.name);};return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.MyPageAddress,children:[addAddress===false&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(MyPageListTitle,{text:\"기본 배송지\"})}),/*#__PURE__*/_jsx(DefaultAddr,{user:addUser,choicedefault:choicedefault}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"default-addr\"],children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(MyPageListTitle,{text:\"배송지 관리\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"select-wrap\"],children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD45C\\uC2DC\\uD560 \\uAC8C\\uC2DC\\uBB3C\"}),/*#__PURE__*/_jsxs(\"select\",{// type={Number}\nvalue:perPage,onChange:function onChange(_ref2){var value=_ref2.target.value;setPerPage(Number(value));setCurrntPage(1);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1\\uAC1C\\uC529 \\uBCF4\\uAE30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\\uAC1C\\uC529 \\uBCF4\\uAE30\"})]})]})]})]}),addAddress===true?/*#__PURE__*/_jsx(MyPageAddressAdd,{user:user,addAddress:addAddress,setAddAddress:setAddAddress,reset:reset,setReset:setReset}):/*#__PURE__*/_jsxs(\"div\",{children:[addUser.length===0&&/*#__PURE__*/_jsx(MyPageNullMsg,{className:classes[\"address-content-null\"],text:\"등록된 주소가 없습니다.\"}),addUser.slice(indexOfFirstQnA,indexOfLastQnA).map(function(user,idx){return/*#__PURE__*/_jsx(\"div\",{className:classes[\"addr-wrap-item\"],children:/*#__PURE__*/_jsx(MyPageAddressItem,{addUser:user,getNum:getNum,targetNum:targetNum,setTargetNum:setTargetNum,setUpdateSate:setUpdateSate,choicedefault:choicedefault,setChoiceDefault:setChoiceDefault})},idx);})]}),/*#__PURE__*/_jsx(\"div\",{className:classes[\"address-wrap-content\"]}),/*#__PURE__*/_jsx(\"div\",{className:classes[\"address-wrap-button\"],children:addAddress===false&&updateState===false?/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return setAddAddress(true);},children:\"\\uCD94\\uAC00\\uD558\\uAE30\"}):/*#__PURE__*/_jsx(_Fragment,{})}),addUser.length!=0&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Pagination,{activePage:currentPage// 현재 페이지\n,itemsCountPerPage:perPage// 한페이지당 보여줄 아이템 갯수\n,totalItemsCount:addUser.length// 총 아이템 갯수\n,pageRangeDisplayed:5// 페이지네이터 내에서 보여줄 페이지 범위\n,prevPageText:\"<\",nextPageText:\">\",onChange:setCurrntPage// 페이지가 바뀔때 핸들링해주는 함수\n})})]})});};export default MyPageAddress;","map":{"version":3,"names":["React","useEffect","useState","axios","MyPageAddressAdd","MyPageAddressItem","MyPageListTitle","MyPageNullMsg","getUser","authCheck","classes","Pagination","DefaultAddr","MyPageAddress","user","setUser","addUser","setAddUser","reset","setReset","addAddress","setAddAddress","currentPage","setCurrntPage","indexOfLastQnA","setIndexOfLastQnA","indexOfFirstQnA","setIndexOfFirstQnA","perPage","setPerPage","choicedefault","setChoiceDefault","updateState","setUpdateSate","targetNum","setTargetNum","addlist","get","withCredentials","then","listRes","data","status","getNum","e","target","name","value","Number","length","slice","map","idx"],"sources":["/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/src/components/pages/myPage/MyPageAddress.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport MyPageAddressAdd from \"./MyPageAddressAdd\";\nimport MyPageAddressItem from \"./MyPageAddressItem\";\nimport MyPageListTitle from \"./MyPageListTitle\";\nimport MyPageNullMsg from \"./MyPageNullMsg\";\n\nimport { getUser } from \"../../../util/getUser\";\nimport { authCheck } from \"../../../util/authCheck\";\n\nimport classes from \"./MyPageAddress.module.css\";\n\nimport Pagination from \"react-js-pagination\";\nimport DefaultAddr from \"./DefaultAddr\";\nconst MyPageAddress = () => {\n  const [user, setUser] = useState({}); //유저 정보 받아오는 곳\n\n  const [addUser, setAddUser] = useState([]); // 추가 된 주소 저장\n  const [reset, setReset] = useState(false);\n\n  const [addAddress, setAddAddress] = useState(false);\n\n  const [currentPage, setCurrntPage] = useState(1); // 현재페이지\n  const [indexOfLastQnA, setIndexOfLastQnA] = useState(0);\n  const [indexOfFirstQnA, setIndexOfFirstQnA] = useState(0);\n  const [perPage, setPerPage] = useState(3);\n\n  const [choicedefault, setChoiceDefault] = useState(false);\n\n  const [updateState, setUpdateSate] = useState(false);\n\n  const [targetNum, setTargetNum] = useState(\"\");\n\n  useEffect(() => {\n    authCheck();\n    getUser(setUser);\n    const addlist = async () => {\n      await axios\n        .get(\n          \"http://localhost:5000/mypage/api/addlist\",\n\n          {\n            withCredentials: true,\n          }\n        )\n        .then((listRes) => {\n          if (listRes.data.status === 200) {\n            setAddUser(listRes.data.user);\n          }\n        });\n    };\n\n    addlist();\n    setIndexOfLastQnA(currentPage * perPage);\n    setIndexOfFirstQnA(indexOfLastQnA - perPage);\n  }, [reset, currentPage, indexOfFirstQnA, indexOfLastQnA, perPage]);\n\n  const getNum = (e) => {\n    setUpdateSate(true);\n    setTargetNum(e.target.name);\n  };\n\n  return (\n    <React.Fragment>\n      <div className={classes.MyPageAddress}>\n        {addAddress === false && (\n          <>\n            <div>\n              <MyPageListTitle text={\"기본 배송지\"} />\n            </div>\n            <DefaultAddr user={addUser} choicedefault={choicedefault} />\n            <div className={classes[\"default-addr\"]}>\n              <div>\n                <MyPageListTitle text={\"배송지 관리\"} />\n              </div>\n              <div className={classes[\"select-wrap\"]}>\n                <label>표시할 게시물</label>\n                <select\n                  // type={Number}\n                  value={perPage}\n                  onChange={({ target: { value } }) => {\n                    setPerPage(Number(value));\n                    setCurrntPage(1);\n                  }}\n                >\n                  <option value=\"1\">1개씩 보기</option>\n                  <option value=\"3\">3개씩 보기</option>\n                </select>\n              </div>\n            </div>\n          </>\n        )}\n\n        {addAddress === true ? (\n          <MyPageAddressAdd\n            user={user}\n            addAddress={addAddress}\n            setAddAddress={setAddAddress}\n            reset={reset}\n            setReset={setReset}\n          />\n        ) : (\n          <div>\n            {addUser.length === 0 && (\n              <MyPageNullMsg\n                className={classes[\"address-content-null\"]}\n                text={\"등록된 주소가 없습니다.\"}\n              />\n            )}\n\n            {addUser.slice(indexOfFirstQnA, indexOfLastQnA).map((user, idx) => (\n              <div className={classes[\"addr-wrap-item\"]} key={idx}>\n                <MyPageAddressItem\n                  addUser={user}\n                  getNum={getNum}\n                  targetNum={targetNum}\n                  setTargetNum={setTargetNum}\n                  setUpdateSate={setUpdateSate}\n                  choicedefault={choicedefault}\n                  setChoiceDefault={setChoiceDefault}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n        <div className={classes[\"address-wrap-content\"]}></div>\n        <div className={classes[\"address-wrap-button\"]}>\n          {addAddress === false && updateState === false ? (\n            <button type=\"button\" onClick={() => setAddAddress(true)}>\n              추가하기\n            </button>\n          ) : (\n            <></>\n          )}\n        </div>\n\n        {addUser.length != 0 && (\n          <div>\n            <Pagination\n              activePage={currentPage} // 현재 페이지\n              itemsCountPerPage={perPage} // 한페이지당 보여줄 아이템 갯수\n              totalItemsCount={addUser.length} // 총 아이템 갯수\n              pageRangeDisplayed={5} // 페이지네이터 내에서 보여줄 페이지 범위\n              prevPageText={\"<\"}\n              nextPageText={\">\"}\n              onChange={setCurrntPage} // 페이지가 바뀔때 핸들링해주는 함수\n            />\n          </div>\n        )}\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default MyPageAddress;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}