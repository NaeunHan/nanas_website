{"ast":null,"code":"import _toConsumableArray from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import ProductCategoryList from\"./ProductCategoryList\";import Banner from\"../home/Banner\";import InfiniteScroll from\"react-infinite-scroll-component\";import classes from\"./ProductsCategory.module.css\";import{useSearchParams}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductsCategory=function ProductsCategory(){var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),category2=_useState4[0],setCategory2=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),products=_useState6[0],setProducts=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),offsetNum=_useState8[0],setOffsetNum=_useState8[1];//처음 시작을 몇 개 보여줄지\nvar _useState9=useState(20),_useState10=_slicedToArray(_useState9,2),startNum=_useState10[0],setStartNum=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),hasMore=_useState12[0],setHasmore=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),tmpNum=_useState14[0],setTmpNum=_useState14[1];var type=searchParams.get(\"type\");useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:5000/product/api/get/products/category?type=\"+type).then(function(response){setCategory(response.data.category);setCategory2(response.data.category2);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[type]);useEffect(function(){var fetchData2=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"http://localhost:5000/product/api/get/products/category/fetchData?startNum=\"+startNum+\"&offsetNum=\"+offsetNum+\"&type=\"+type).then(function(response){setProducts([].concat(_toConsumableArray(products),_toConsumableArray(response.data.products)));//기존 자료 + 불러온 자료\nsetTmpNum(response.data.startNum);setOffsetNum(response.data.offsetNum);setHasmore(response.data.moreData);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData2(){return _ref2.apply(this,arguments);};}();fetchData2();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[startNum]);var fetchData3=function fetchData3(){setStartNum(tmpNum);};// /api/get/products/category/fetchdata 추가데이터 받아오기\nreturn/*#__PURE__*/_jsxs(\"div\",{className:classes.productsCategory,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes[\"productsCategory-left\"],onClick:function onClick(){},children:[/*#__PURE__*/_jsx(\"h4\",{children:category}),category2.map(function(it,idx){return/*#__PURE__*/_jsx(ProductCategoryList,{title:it.category2,type:type,setProducts:setProducts},idx);})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"productsCategory-right\"],children:[/*#__PURE__*/_jsx(\"h4\",{children:category}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:products.length,next:fetchData3,hasMore:hasMore,endMessage:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\uB354 \\uC774\\uC0C1 \\uC0C1\\uD488\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"})}),loading:/*#__PURE__*/_jsx(\"h1\",{children:\"Loading...\"}),initialScrollY:true,children:/*#__PURE__*/_jsx(Banner,{className:classes[\"productsCategory-banner\"],products:products})})]})]});};export default ProductsCategory;","map":{"version":3,"names":["React","useEffect","useState","ProductCategoryList","Banner","InfiniteScroll","classes","useSearchParams","axios","ProductsCategory","searchParams","category","setCategory","category2","setCategory2","products","setProducts","offsetNum","setOffsetNum","startNum","setStartNum","hasMore","setHasmore","tmpNum","setTmpNum","type","get","fetchData","then","response","data","fetchData2","moreData","fetchData3","productsCategory","map","it","idx","length"],"sources":["/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/src/components/pages/productsCategory/ProductsCategory.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport ProductCategoryList from \"./ProductCategoryList\";\nimport Banner from \"../home/Banner\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport classes from \"./ProductsCategory.module.css\";\nimport { useSearchParams } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst ProductsCategory = () => {\n  const [searchParams] = useSearchParams();\n  const [category, setCategory] = useState(\"\");\n  const [category2, setCategory2] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [offsetNum, setOffsetNum] = useState(0); //처음 시작을 몇 개 보여줄지\n  const [startNum, setStartNum] = useState(20);\n  const [hasMore, setHasmore] = useState(true);\n  const [tmpNum, setTmpNum] = useState(0);\n  const type = searchParams.get(\"type\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await axios\n        .get(\n          \"http://localhost:5000/product/api/get/products/category?type=\" + type\n        )\n        .then((response) => {\n          setCategory(response.data.category);\n          setCategory2(response.data.category2);\n        });\n    };\n    fetchData();\n  }, [type]);\n  useEffect(() => {\n    const fetchData2 = async () => {\n      await axios\n        .get(\n          \"http://localhost:5000/product/api/get/products/category/fetchData?startNum=\" +\n            startNum +\n            \"&offsetNum=\" +\n            offsetNum +\n            \"&type=\" +\n            type\n        )\n        .then((response) => {\n          setProducts([...products, ...response.data.products]); //기존 자료 + 불러온 자료\n          setTmpNum(response.data.startNum);\n          setOffsetNum(response.data.offsetNum);\n          setHasmore(response.data.moreData);\n        });\n    };\n    fetchData2();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [startNum]);\n  const fetchData3 = () => {\n    setStartNum(tmpNum);\n  };\n  // /api/get/products/category/fetchdata 추가데이터 받아오기\n  return (\n    <div className={classes.productsCategory}>\n      {/* 좌측 카테고리 정렬 (상단 카테고리 중분류 + 소분류, 하단 대분류) */}\n      <div className={classes[\"productsCategory-left\"]} onClick={() => {}}>\n        <h4>{category}</h4>\n        {category2.map((it, idx) => (\n          <ProductCategoryList\n            title={it.category2}\n            type={type}\n            setProducts={setProducts}\n            key={idx}\n          />\n        ))}\n      </div>\n\n      {/* 우측 상품 */}\n      <div className={classes[\"productsCategory-right\"]}>\n        <h4>{category}</h4>\n        <InfiniteScroll\n          dataLength={products.length}\n          next={fetchData3}\n          hasMore={hasMore}\n          endMessage={\n            <div>\n              <h1>더 이상 상품이 없습니다</h1>\n            </div>\n          }\n          loading={<h1>Loading...</h1>}\n          initialScrollY\n        >\n          <Banner\n            className={classes[\"productsCategory-banner\"]}\n            products={products}\n          />\n        </InfiniteScroll>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductsCategory;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}