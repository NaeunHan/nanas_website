{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Card from\"../../UI/Card\";import{RiShoppingCart2Line}from\"react-icons/ri\";import classes from\"./SearchItem.module.css\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{cookieCheck}from\"../../../util/authCheck\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchItem=function SearchItem(_ref){var _data$productId,_data$title,_data$lprice,_data$mallName,_data$image;var data=_ref.data;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLogin=_useState4[0],setIsLogin=_useState4[1];useEffect(function(){cookieCheck(setIsLogin,setUser);},[]);// üî• Í∞ÄÏû• Ï§ëÏöî: data ÏóÜÏúºÎ©¥ Ï†àÎåÄ Î†åÎçî Ïïà Ìï®\nif(!data)return null;// ‚úÖ ÎÑ§Ïù¥Î≤Ñ Ïò§Ìîà API Í∏∞Ï§Ä ÌïÑÎìúÎßå ÏÇ¨Ïö©\nvar productId=(_data$productId=data.productId)!==null&&_data$productId!==void 0?_data$productId:null;var title=String((_data$title=data.title)!==null&&_data$title!==void 0?_data$title:\"\").replace(/<[^>]*>/g,\"\").trim();var price=Number(String((_data$lprice=data.lprice)!==null&&_data$lprice!==void 0?_data$lprice:\"0\").replace(/[^0-9]/g,\"\"));var mallName=(_data$mallName=data.mallName)!==null&&_data$mallName!==void 0?_data$mallName:\"\";var image=(_data$image=data.image)!==null&&_data$image!==void 0?_data$image:\"\";// üî• titleÏù¥ÎÇò price ÏóÜÏúºÎ©¥ Î†åÎçî Ïïà Ìï® (ÌôîÏù¥Ìä∏Ïä§ÌÅ¨Î¶∞ Î∞©ÏßÄ)\nif(!title||!price)return null;var handleInsertCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isLogin){_context.next=4;break;}alert(\"Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.\");navigate(\"/login\");return _context.abrupt(\"return\");case 4:if(productId){_context.next=7;break;}alert(\"ÏÉÅÌíà IDÍ∞Ä ÏóÜÏñ¥ Ïû•Î∞îÍµ¨ÎãàÏóê Îã¥ÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.\");return _context.abrupt(\"return\");case 7:_context.prev=7;_context.next=10;return axios.post(\"http://localhost:5000/order/api/cart/insert\",{sQuantity:1,uId:user===null||user===void 0?void 0:user.uId,productId:productId});case 10:alert(\"Ïû•Î∞îÍµ¨ÎãàÏóê Îã¥ÏïòÏäµÎãàÎã§.\");_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](7);console.error(_context.t0);alert(\"Ïû•Î∞îÍµ¨Îãà Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\");case 17:case\"end\":return _context.stop();}}},_callee,null,[[7,13]]);}));return function handleInsertCart(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:classes.searchItem,children:[/*#__PURE__*/_jsx(Link,{className:classes[\"product-link\"],to:\"/products/\".concat(productId),children:/*#__PURE__*/_jsx(Card,{className:classes[\"searchItem-img\"],children:image?/*#__PURE__*/_jsx(\"img\",{src:image,alt:title}):/*#__PURE__*/_jsx(\"div\",{style:{height:120}})})}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"searchItem-info\"],children:[/*#__PURE__*/_jsx(\"p\",{className:classes[\"searchItem-info-mallname\"],children:mallName}),/*#__PURE__*/_jsx(Link,{className:classes[\"product-link\"],to:\"/products/\".concat(productId),children:/*#__PURE__*/_jsx(\"p\",{className:classes[\"searchItem-info-title\"],children:title.length>45?title.substring(0,45)+\"...\":title})}),/*#__PURE__*/_jsxs(\"p\",{className:classes[\"searchItem-info-price\"],children:[price.toLocaleString(\"ko-kr\"),\"\\uC6D0\"]}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"searchItem-info-review\"],children:/*#__PURE__*/_jsx(\"span\",{className:classes[\"searchItem-info-review__cart\"],children:/*#__PURE__*/_jsx(RiShoppingCart2Line,{onClick:handleInsertCart})})})]})]});};export default SearchItem;","map":{"version":3,"names":["React","useEffect","useState","Card","RiShoppingCart2Line","classes","Link","useNavigate","axios","cookieCheck","SearchItem","data","navigate","user","setUser","isLogin","setIsLogin","productId","title","String","replace","trim","price","Number","lprice","mallName","image","handleInsertCart","alert","post","sQuantity","uId","console","error","searchItem","height","length","substring","toLocaleString"],"sources":["/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/src/components/pages/search/SearchItem.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Card from \"../../UI/Card\";\nimport { RiShoppingCart2Line } from \"react-icons/ri\";\nimport classes from \"./SearchItem.module.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { cookieCheck } from \"../../../util/authCheck\";\n\nconst SearchItem = ({ data }) => {\n  const navigate = useNavigate();\n  const [user, setUser] = useState(null);\n  const [isLogin, setIsLogin] = useState(false);\n\n  useEffect(() => {\n    cookieCheck(setIsLogin, setUser);\n  }, []);\n\n  // üî• Í∞ÄÏû• Ï§ëÏöî: data ÏóÜÏúºÎ©¥ Ï†àÎåÄ Î†åÎçî Ïïà Ìï®\n  if (!data) return null;\n\n  // ‚úÖ ÎÑ§Ïù¥Î≤Ñ Ïò§Ìîà API Í∏∞Ï§Ä ÌïÑÎìúÎßå ÏÇ¨Ïö©\n  const productId = data.productId ?? null;\n\n  const title = String(data.title ?? \"\")\n    .replace(/<[^>]*>/g, \"\")\n    .trim();\n\n  const price = Number(\n    String(data.lprice ?? \"0\").replace(/[^0-9]/g, \"\")\n  );\n\n  const mallName = data.mallName ?? \"\";\n  const image = data.image ?? \"\";\n\n  // üî• titleÏù¥ÎÇò price ÏóÜÏúºÎ©¥ Î†åÎçî Ïïà Ìï® (ÌôîÏù¥Ìä∏Ïä§ÌÅ¨Î¶∞ Î∞©ÏßÄ)\n  if (!title || !price) return null;\n\n  const handleInsertCart = async () => {\n    if (!isLogin) {\n      alert(\"Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.\");\n      navigate(\"/login\");\n      return;\n    }\n\n    if (!productId) {\n      alert(\"ÏÉÅÌíà IDÍ∞Ä ÏóÜÏñ¥ Ïû•Î∞îÍµ¨ÎãàÏóê Îã¥ÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.\");\n      return;\n    }\n\n    try {\n      await axios.post(\"http://localhost:5000/order/api/cart/insert\", {\n        sQuantity: 1,\n        uId: user?.uId,\n        productId: productId,\n      });\n      alert(\"Ïû•Î∞îÍµ¨ÎãàÏóê Îã¥ÏïòÏäµÎãàÎã§.\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Ïû•Î∞îÍµ¨Îãà Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\");\n    }\n  };\n\n  return (\n    <div className={classes.searchItem}>\n      <Link className={classes[\"product-link\"]} to={`/products/${productId}`}>\n        <Card className={classes[\"searchItem-img\"]}>\n          {image ? (\n            <img src={image} alt={title} />\n          ) : (\n            <div style={{ height: 120 }} />\n          )}\n        </Card>\n      </Link>\n\n      <div className={classes[\"searchItem-info\"]}>\n        <p className={classes[\"searchItem-info-mallname\"]}>{mallName}</p>\n\n        <Link className={classes[\"product-link\"]} to={`/products/${productId}`}>\n          <p className={classes[\"searchItem-info-title\"]}>\n            {title.length > 45 ? title.substring(0, 45) + \"...\" : title}\n          </p>\n        </Link>\n\n        <p className={classes[\"searchItem-info-price\"]}>\n          {price.toLocaleString(\"ko-kr\")}Ïõê\n        </p>\n\n        <p className={classes[\"searchItem-info-review\"]}>\n          <span className={classes[\"searchItem-info-review__cart\"]}>\n            <RiShoppingCart2Line onClick={handleInsertCart} />\n          </span>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default SearchItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}