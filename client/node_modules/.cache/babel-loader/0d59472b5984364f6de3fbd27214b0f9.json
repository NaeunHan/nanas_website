{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import MyPageCheckPw from\"./MyPageCheckPw\";import classes from\"./MyPageUserDelete.module.css\";import axios from\"axios\";import{getUser}from\"../../../util/getUser\";import{authCheck,handleLogout}from\"../../../util/authCheck\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyPageUserDelete=function MyPageUserDelete(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),userPw=_useState2[0],setUserPw=_useState2[1];var navigate=useNavigate();var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var deleteUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!window.confirm(\"정말 탈퇴하시겠습니까?\")){_context.next=4;break;}_context.next=4;return axios.post(\"http://localhost:5000/mypage/api/deleteuser\",{user:user}).then(function(response){if(response.data.status===200){handleLogout();alert(response.data.message);}else{navigate(-1,{replace:true});}});case 4:case\"end\":return _context.stop();}}},_callee);}));return function deleteUser(_x){return _ref.apply(this,arguments);};}();useEffect(function(){authCheck();getUser(setUser);},[]);return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:classes.MyPageUserDelete,children:!userPw?/*#__PURE__*/_jsx(\"div\",{className:classes.checkwrap,children:/*#__PURE__*/_jsx(MyPageCheckPw,{setUserPw:setUserPw,userPw:userPw,user:user})}):/*#__PURE__*/_jsxs(\"div\",{className:classes[\"delete-wrap-content\"],children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD68C\\uC6D0 \\uD0C8\\uD1F4\\uCC98\\uB9AC\\uB97C \\uD558\\uC2E4\\uB824\\uBA74 \\uD655\\uC778 \\uBC84\\uD2BC\\uC744 \\uB20C\\uB7EC\\uC8FC\\uC138\\uC694.\"})}),/*#__PURE__*/_jsx(\"form\",{action:\"\",onSubmit:deleteUser,children:/*#__PURE__*/_jsx(\"div\",{className:classes[\"delete-wrap-button\"],children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\uD655\\uC778\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return navigate(\"/mypage\",{replace:true});},children:\"\\uCDE8\\uC18C\"})]})})})]})})});};export default MyPageUserDelete;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","MyPageCheckPw","classes","axios","getUser","authCheck","handleLogout","MyPageUserDelete","userPw","setUserPw","navigate","user","setUser","deleteUser","e","preventDefault","window","confirm","post","then","response","data","status","alert","message","replace","checkwrap"],"sources":["/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/src/components/pages/myPage/MyPageUserDelete.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport MyPageCheckPw from \"./MyPageCheckPw\";\nimport classes from \"./MyPageUserDelete.module.css\";\n\nimport axios from \"axios\";\nimport { getUser } from \"../../../util/getUser\";\nimport { authCheck, handleLogout } from \"../../../util/authCheck\";\n\nconst MyPageUserDelete = () => {\n  const [userPw, setUserPw] = useState(false);\n\n  const navigate = useNavigate();\n\n  const [user, setUser] = useState({});\n\n  const deleteUser = async (e) => {\n    e.preventDefault();\n\n    if (window.confirm(\"정말 탈퇴하시겠습니까?\")) {\n      await axios\n        .post(\"http://localhost:5000/mypage/api/deleteuser\", { user })\n        .then((response) => {\n          if (response.data.status === 200) {\n            handleLogout();\n            alert(response.data.message);\n          } else {\n            navigate(-1, { replace: true });\n          }\n        });\n    }\n  };\n\n  useEffect(() => {\n    authCheck();\n    getUser(setUser);\n  }, []);\n\n  return (\n    <React.Fragment>\n      <div className={classes.MyPageUserDelete}>\n        {!userPw ? (\n          <div className={classes.checkwrap}>\n            <MyPageCheckPw setUserPw={setUserPw} userPw={userPw} user={user} />\n          </div>\n        ) : (\n          <div className={classes[\"delete-wrap-content\"]}>\n            <div>\n              <h2>회원 탈퇴처리를 하실려면 확인 버튼을 눌러주세요.</h2>\n            </div>\n\n            <form action=\"\" onSubmit={deleteUser}>\n              <div className={classes[\"delete-wrap-button\"]}>\n                <div>\n                  <button type=\"submit\">확인</button>\n                  <button\n                    type=\"button\"\n                    onClick={() => navigate(\"/mypage\", { replace: true })}\n                  >\n                    취소\n                  </button>\n                </div>\n              </div>\n            </form>\n          </div>\n        )}\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default MyPageUserDelete;\n"],"mappings":"kdAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,cAAa,KAAM,iBAAiB,CAC3C,MAAOC,QAAO,KAAM,+BAA+B,CAEnD,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,uBAAuB,CAC/C,OAASC,SAAS,CAAEC,YAAY,KAAQ,yBAAyB,CAAC,wFAElE,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,EAAS,CAC7B,cAA4BR,QAAQ,CAAC,KAAK,CAAC,wCAApCS,MAAM,eAAEC,SAAS,eAExB,GAAMC,SAAQ,CAAGV,WAAW,EAAE,CAE9B,eAAwBD,QAAQ,CAAC,CAAC,CAAC,CAAC,yCAA7BY,IAAI,eAAEC,OAAO,eAEpB,GAAMC,WAAU,4FAAG,iBAAOC,CAAC,oHACzBA,CAAC,CAACC,cAAc,EAAE,CAAC,IAEfC,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,+CAC1Bd,MAAK,CACRe,IAAI,CAAC,6CAA6C,CAAE,CAAEP,IAAI,CAAJA,IAAK,CAAC,CAAC,CAC7DQ,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClB,GAAIA,QAAQ,CAACC,IAAI,CAACC,MAAM,GAAK,GAAG,CAAE,CAChChB,YAAY,EAAE,CACdiB,KAAK,CAACH,QAAQ,CAACC,IAAI,CAACG,OAAO,CAAC,CAC9B,CAAC,IAAM,CACLd,QAAQ,CAAC,CAAC,CAAC,CAAE,CAAEe,OAAO,CAAE,IAAK,CAAC,CAAC,CACjC,CACF,CAAC,CAAC,uDAEP,kBAfKZ,WAAU,4CAef,CAEDf,SAAS,CAAC,UAAM,CACdO,SAAS,EAAE,CACXD,OAAO,CAACQ,OAAO,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,KAAC,KAAK,CAAC,QAAQ,wBACb,YAAK,SAAS,CAAEV,OAAO,CAACK,gBAAiB,UACtC,CAACC,MAAM,cACN,YAAK,SAAS,CAAEN,OAAO,CAACwB,SAAU,uBAChC,KAAC,aAAa,EAAC,SAAS,CAAEjB,SAAU,CAAC,MAAM,CAAED,MAAO,CAAC,IAAI,CAAEG,IAAK,EAAG,EAC/D,cAEN,aAAK,SAAS,CAAET,OAAO,CAAC,qBAAqB,CAAE,wBAC7C,kCACE,4JAAoC,EAChC,cAEN,aAAM,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAEW,UAAW,uBACnC,YAAK,SAAS,CAAEX,OAAO,CAAC,oBAAoB,CAAE,uBAC5C,oCACE,eAAQ,IAAI,CAAC,QAAQ,0BAAY,cACjC,eACE,IAAI,CAAC,QAAQ,CACb,OAAO,CAAE,yBAAMQ,SAAQ,CAAC,SAAS,CAAE,CAAEe,OAAO,CAAE,IAAK,CAAC,CAAC,EAAC,0BAG/C,GACL,EACF,EACD,GAEV,EACG,EACS,CAErB,CAAC,CAED,cAAelB,iBAAgB"},"metadata":{},"sourceType":"module"}