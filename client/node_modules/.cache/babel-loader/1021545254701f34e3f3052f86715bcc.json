{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{Link,NavLink,Outlet}from\"react-router-dom\";import Profile from\"../../../assets/icons/siba.png\";import MyPageSide from\"./MyPageSide\";import{FaCog}from\"react-icons/fa\";import{getUser}from\"../../../util/getUser\";import{authCheck}from\"../../../util/authCheck\";import{FaHamburger}from\"react-icons/fa\";import classes from\"./MyPage.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyPage=function MyPage(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var mile=parseInt(user.uMile);var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),basketCount=_useState4[0],setBasketCount=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),boardData=_useState6[0],setBoardData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isShowCategory=_useState8[0],_setIsShowCategory=_useState8[1];useEffect(function(){authCheck();getUser(setUser);var basketData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:5000/mypage/api/getbasket\",{withCredentials:true}).then(function(response){setBasketCount(response.data.count[0]);setBoardData(response.data.result[1]);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function basketData(){return _ref.apply(this,arguments);};}();basketData();},[]);var reviewCount=boardData.filter(function(it){return it.bBoardtype===\"리뷰\";});var inquiryCount=boardData.filter(function(it){return it.bBoardtype===\"상품문의\"||it.bBoardtype===\"배송문의\"||it.bBoardtype===\"교환/환불문의\"||it.bBoardtype===\"반품\"||it.bBoardtype===\"취소\"||it.bBoardtype===\"환불\"||it.bBoardtype===\"교환\";});return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.MyPage,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes[\"mypage-wrap-title\"],children:[/*#__PURE__*/_jsxs(\"div\",{className:classes[\"mypage-title-left\"],children:[/*#__PURE__*/_jsx(\"div\",{className:classes[\"mypage-wrap-profile\"],children:/*#__PURE__*/_jsx(\"img\",{src:Profile,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uC548\\uB155\\uD558\\uC138\\uC694 \",/*#__PURE__*/_jsx(\"span\",{children:user.uName}),\"\\uB2D8.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"mypage-title-right\"],children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/updateuser\",children:/*#__PURE__*/_jsx(FaCog,{className:classes[\"mypage-title-icon\"]})})}),/*#__PURE__*/_jsx(\"div\",{children:\"\\uAC1C\\uC778\\uC815\\uBCF4\\uC218\\uC815\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"mypage-quick-btn\"],children:[/*#__PURE__*/_jsxs(\"div\",{className:classes[\"mypage-quick-item\"],children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"mypageinquirylist\",children:inquiryCount.length===\"NaN\"?0:inquiryCount.length})}),/*#__PURE__*/_jsx(\"div\",{children:\"\\uBB38\\uC758 \\uB0B4\\uC5ED \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"mypage-quick-item\"],children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"reviewlist\",children:reviewCount.length===\"NaN\"?0:reviewCount.length})}),/*#__PURE__*/_jsx(\"div\",{children:\"\\uC0C1\\uD488\\uD3C9\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"mypage-quick-item\"],children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/cart\",children:Object.values(basketCount).length===0?0:Object.values(basketCount)})}),/*#__PURE__*/_jsx(\"div\",{children:\"\\uC7A5\\uBC14\\uAD6C\\uB2C8\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"mypage-quick-item\"],children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"mypointcheck\",children:mile===\"NaN\"?0:mile.toLocaleString(\"ko-kr\")})}),/*#__PURE__*/_jsx(\"div\",{children:\"\\uB098\\uC758 \\uD3EC\\uC778\\uD2B8\"})]})]})]}),/*#__PURE__*/_jsx(FaHamburger,{className:classes.triger,onClick:function onClick(){return _setIsShowCategory(true);}}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"mypage-wrap-bottom\"],children:[isShowCategory&&/*#__PURE__*/_jsx(MyPageSide,{isShowCategory:isShowCategory,setIsShowCategory:function setIsShowCategory(){return _setIsShowCategory(false);}}),/*#__PURE__*/_jsx(MyPageSide,{className:classes[\"aside_1400\"]}),/*#__PURE__*/_jsx(Outlet,{})]})]});};export default MyPage;","map":{"version":3,"names":["axios","React","useEffect","useState","Link","NavLink","Outlet","Profile","MyPageSide","FaCog","getUser","authCheck","FaHamburger","classes","MyPage","user","setUser","mile","parseInt","uMile","basketCount","setBasketCount","boardData","setBoardData","isShowCategory","setIsShowCategory","basketData","get","withCredentials","then","response","data","count","result","reviewCount","filter","it","bBoardtype","inquiryCount","uName","length","Object","values","toLocaleString","triger"],"sources":["/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/src/components/pages/myPage/MyPage.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link, NavLink, Outlet } from \"react-router-dom\";\n\nimport Profile from \"../../../assets/icons/siba.png\";\n\nimport MyPageSide from \"./MyPageSide\";\n\nimport { FaCog } from \"react-icons/fa\";\nimport { getUser } from \"../../../util/getUser\";\nimport { authCheck } from \"../../../util/authCheck\";\n\nimport { FaHamburger } from \"react-icons/fa\";\n\nimport classes from \"./MyPage.module.css\";\n\nconst MyPage = () => {\n  const [user, setUser] = useState({});\n  const mile = parseInt(user.uMile);\n  const [basketCount, setBasketCount] = useState(\"\");\n  const [boardData, setBoardData] = useState([]);\n  const [isShowCategory, setIsShowCategory] = useState(false);\n\n  useEffect(() => {\n    authCheck();\n    getUser(setUser);\n    const basketData = async () => {\n      await axios\n        .get(\"http://localhost:5000/mypage/api/getbasket\", {\n          withCredentials: true,\n        })\n        .then((response) => {\n          setBasketCount(response.data.count[0]);\n          setBoardData(response.data.result[1]);\n        });\n    };\n\n    basketData();\n  }, []);\n  const reviewCount = boardData.filter((it) => {\n    return it.bBoardtype === \"리뷰\";\n  });\n  const inquiryCount = boardData.filter((it) => {\n    return (\n      it.bBoardtype === \"상품문의\" ||\n      it.bBoardtype === \"배송문의\" ||\n      it.bBoardtype === \"교환/환불문의\" ||\n      it.bBoardtype === \"반품\" ||\n      it.bBoardtype === \"취소\" ||\n      it.bBoardtype === \"환불\" ||\n      it.bBoardtype === \"교환\"\n    );\n  });\n  return (\n    <React.Fragment>\n      <div className={classes.MyPage}>\n        <div className={classes[\"mypage-wrap-title\"]}>\n          <div className={classes[\"mypage-title-left\"]}>\n            <div className={classes[\"mypage-wrap-profile\"]}>\n              <img src={Profile} alt=\"\" />\n            </div>\n            <div>\n              안녕하세요 <span>{user.uName}</span>님.\n            </div>\n          </div>\n          <div className={classes[\"mypage-title-right\"]}>\n            <div>\n              <Link to=\"/updateuser\">\n                <FaCog className={classes[\"mypage-title-icon\"]} />\n              </Link>\n            </div>\n            <div>개인정보수정</div>\n          </div>\n        </div>\n\n        <div className={classes[\"mypage-quick-btn\"]}>\n          <div className={classes[\"mypage-quick-item\"]}>\n            <div>\n              <NavLink to=\"mypageinquirylist\">\n                {inquiryCount.length === \"NaN\" ? 0 : inquiryCount.length}\n              </NavLink>\n            </div>\n            <div>문의 내역 </div>\n          </div>\n          <div className={classes[\"mypage-quick-item\"]}>\n            <div>\n              <NavLink to=\"reviewlist\">\n                {reviewCount.length === \"NaN\" ? 0 : reviewCount.length}\n              </NavLink>\n            </div>\n            <div>상품평</div>\n          </div>\n          <div className={classes[\"mypage-quick-item\"]}>\n            <div>\n              <NavLink to=\"/cart\">\n                {Object.values(basketCount).length === 0\n                  ? 0\n                  : Object.values(basketCount)}\n              </NavLink>\n            </div>\n            <div>장바구니</div>\n          </div>\n          <div className={classes[\"mypage-quick-item\"]}>\n            <div>\n              <NavLink to=\"mypointcheck\">\n                {mile === \"NaN\" ? 0 : mile.toLocaleString(\"ko-kr\")}\n              </NavLink>\n            </div>\n            <div>나의 포인트</div>\n          </div>\n        </div>\n      </div>\n      <FaHamburger\n        className={classes.triger}\n        onClick={() => setIsShowCategory(true)}\n      />\n      <div className={classes[\"mypage-wrap-bottom\"]}>\n        {isShowCategory && (\n          <MyPageSide\n            isShowCategory={isShowCategory}\n            setIsShowCategory={() => setIsShowCategory(false)}\n          />\n        )}\n\n        <MyPageSide className={classes[\"aside_1400\"]} />\n\n        <Outlet />\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default MyPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}