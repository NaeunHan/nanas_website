{"ast":null,"code":"import _objectSpread from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useState}from\"react\";import classes from\"./SubProducts.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SubProducts=function SubProducts(_ref){var detailProduct=_ref.detailProduct,onDetailProduct=_ref.onDetailProduct,setReset=_ref.setReset;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isUpdate=_useState2[0],setIsUpdate=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isValid=_useState4[0],setIsValid=_useState4[1];var stringCheck=/[a-zA-Zㄱ-ㅎ|ㅏ-ㅣ|가-힣]/g;var numCheck=/[0-9]/g;var handleUpdate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsValid(stringCheck.exec(detailProduct.title)&&numCheck.exec(detailProduct.price)&&numCheck.exec(detailProduct.pDiscount)&&detailProduct.mallname.length!==0);if(isValid){_context.next=5;break;}return _context.abrupt(\"return\");case 5:setIsUpdate(false);_context.next=8;return axios.post(\"http://localhost:5000/admin/api/product/update\",{productId:+detailProduct.productId,title:detailProduct.title,price:+detailProduct.price,mallname:detailProduct.mallname,pDiscount:+detailProduct.pDiscount}).then(setReset(function(prev){return!prev;}));case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleUpdate(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:classes.subOrder,children:[/*#__PURE__*/_jsx(\"h4\",{className:classes[\"subOrder-title\"],children:\"\\uC0C1\\uD488 \\uC0C1\\uC138 \\uC870\\uD68C\"}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__title\"],children:\"\\uD310\\uB9E4\\uCC98\"}),!isUpdate?/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__data\"],children:detailProduct.mallname}):/*#__PURE__*/_jsx(\"input\",{className:classes[\"subOrder-content__input\"],type:\"text\",value:detailProduct.mallname,onChange:function onChange(e){return onDetailProduct(function(prev){return _objectSpread(_objectSpread({},prev),{},{mallname:e.target.value});});}}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__title\"],children:\"\\uC0C1\\uD488\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__data\"],children:detailProduct.productId}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__title\"],children:\"\\uC0C1\\uD488 \\uC774\\uBBF8\\uC9C0\"}),/*#__PURE__*/_jsx(\"div\",{className:classes[\"subOrder-content__data__img\"],children:/*#__PURE__*/_jsx(\"img\",{src:detailProduct.image,alt:detailProduct.title})}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__title\"],children:\"\\uC0C1\\uD488\\uBA85\"}),!isUpdate?/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__data\"],children:detailProduct.title}):/*#__PURE__*/_jsx(\"input\",{className:classes[\"subOrder-content__input\"],type:\"text\",value:detailProduct.title,onChange:function onChange(e){return onDetailProduct(function(prev){return _objectSpread(_objectSpread({},prev),{},{title:e.target.value});});}}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__title\"],children:\"\\uC0C1\\uD488 \\uAC00\\uACA9\"}),!isUpdate?/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__data\"],children:detailProduct.price}):/*#__PURE__*/_jsx(\"input\",{className:classes[\"subOrder-content__input\"],type:\"text\",value:detailProduct.price,onChange:function onChange(e){return onDetailProduct(function(prev){return _objectSpread(_objectSpread({},prev),{},{price:e.target.value});});}}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__title\"],children:\"\\uC0C1\\uD488 \\uD560\\uC778\\uB960\"}),!isUpdate?/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__data\"],children:detailProduct.pDiscount}):/*#__PURE__*/_jsx(\"input\",{className:classes[\"subOrder-content__input\"],type:\"text\",value:detailProduct.pDiscount,onChange:function onChange(e){return onDetailProduct(function(prev){return _objectSpread(_objectSpread({},prev),{},{pDiscount:e.target.value});});}}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__title\"],children:\"\\uD310\\uB9E4\\uB7C9\"}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__data\"],children:detailProduct.pSellCount}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__title\"],children:\"\\uB9AC\\uBDF0\\uC218\"}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__data\"],children:detailProduct.pReviewCount}),!isValid&&/*#__PURE__*/_jsx(\"p\",{className:classes[\"subOrder-content__err\"],children:\"\\uBE48\\uAC12\\uC744 \\uC800\\uC7A5\\uD560 \\uC218 \\uC5C6\\uC73C\\uBA70, \\uC0C1\\uD488\\uAC00\\uACA9\\uACFC \\uC0C1\\uD488 \\uD560\\uC778\\uB960\\uC5D0 \\uBB38\\uC790\\uB97C \\uC785\\uB825\\uD560 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"div\",{className:classes[\"subOrder-content__update\"],children:!isUpdate?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setIsUpdate(true);},children:\"\\uC218\\uC815\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdate,children:\"\\uC800\\uC7A5\"})})]});};export default SubProducts;","map":{"version":3,"names":["axios","React","useState","classes","SubProducts","detailProduct","onDetailProduct","setReset","isUpdate","setIsUpdate","isValid","setIsValid","stringCheck","numCheck","handleUpdate","exec","title","price","pDiscount","mallname","length","post","productId","then","prev","subOrder","e","target","value","image","pSellCount","pReviewCount"],"sources":["/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/src/components/pages/admin/SubProducts.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\n\nimport classes from \"./SubProducts.module.css\";\nconst SubProducts = ({ detailProduct, onDetailProduct, setReset }) => {\n  const [isUpdate, setIsUpdate] = useState(false);\n  const [isValid, setIsValid] = useState(true);\n\n  const stringCheck = /[a-zA-Zㄱ-ㅎ|ㅏ-ㅣ|가-힣]/g;\n  const numCheck = /[0-9]/g;\n\n  const handleUpdate = async () => {\n    setIsValid(\n      stringCheck.exec(detailProduct.title) &&\n        numCheck.exec(detailProduct.price) &&\n        numCheck.exec(detailProduct.pDiscount) &&\n        detailProduct.mallname.length !== 0\n    );\n    if (!isValid) {\n      return;\n    } else {\n      setIsUpdate(false);\n\n      await axios\n        .post(\"http://localhost:5000/admin/api/product/update\", {\n          productId: +detailProduct.productId,\n          title: detailProduct.title,\n          price: +detailProduct.price,\n          mallname: detailProduct.mallname,\n          pDiscount: +detailProduct.pDiscount,\n        })\n        .then(setReset((prev) => !prev));\n    }\n  };\n\n  return (\n    <div className={classes.subOrder}>\n      <h4 className={classes[\"subOrder-title\"]}>상품 상세 조회</h4>\n\n      <p className={classes[\"subOrder-content__title\"]}>판매처</p>\n      {!isUpdate ? (\n        <p className={classes[\"subOrder-content__data\"]}>\n          {detailProduct.mallname}\n        </p>\n      ) : (\n        <input\n          className={classes[\"subOrder-content__input\"]}\n          type=\"text\"\n          value={detailProduct.mallname}\n          onChange={(e) =>\n            onDetailProduct((prev) => {\n              return { ...prev, mallname: e.target.value };\n            })\n          }\n        />\n      )}\n\n      <p className={classes[\"subOrder-content__title\"]}>상품번호</p>\n\n      <p className={classes[\"subOrder-content__data\"]}>\n        {detailProduct.productId}\n      </p>\n\n      <p className={classes[\"subOrder-content__title\"]}>상품 이미지</p>\n      <div className={classes[\"subOrder-content__data__img\"]}>\n        <img src={detailProduct.image} alt={detailProduct.title} />\n      </div>\n\n      <p className={classes[\"subOrder-content__title\"]}>상품명</p>\n      {!isUpdate ? (\n        <p className={classes[\"subOrder-content__data\"]}>\n          {detailProduct.title}\n        </p>\n      ) : (\n        <input\n          className={classes[\"subOrder-content__input\"]}\n          type=\"text\"\n          value={detailProduct.title}\n          onChange={(e) =>\n            onDetailProduct((prev) => {\n              return { ...prev, title: e.target.value };\n            })\n          }\n        />\n      )}\n\n      <p className={classes[\"subOrder-content__title\"]}>상품 가격</p>\n      {!isUpdate ? (\n        <p className={classes[\"subOrder-content__data\"]}>\n          {detailProduct.price}\n        </p>\n      ) : (\n        <input\n          className={classes[\"subOrder-content__input\"]}\n          type=\"text\"\n          value={detailProduct.price}\n          onChange={(e) =>\n            onDetailProduct((prev) => {\n              return { ...prev, price: e.target.value };\n            })\n          }\n        />\n      )}\n\n      <p className={classes[\"subOrder-content__title\"]}>상품 할인률</p>\n      {!isUpdate ? (\n        <p className={classes[\"subOrder-content__data\"]}>\n          {detailProduct.pDiscount}\n        </p>\n      ) : (\n        <input\n          className={classes[\"subOrder-content__input\"]}\n          type=\"text\"\n          value={detailProduct.pDiscount}\n          onChange={(e) =>\n            onDetailProduct((prev) => {\n              return { ...prev, pDiscount: e.target.value };\n            })\n          }\n        />\n      )}\n\n      <p className={classes[\"subOrder-content__title\"]}>판매량</p>\n      <p className={classes[\"subOrder-content__data\"]}>\n        {detailProduct.pSellCount}\n      </p>\n\n      <p className={classes[\"subOrder-content__title\"]}>리뷰수</p>\n      <p className={classes[\"subOrder-content__data\"]}>\n        {detailProduct.pReviewCount}\n      </p>\n\n      {!isValid && (\n        <p className={classes[\"subOrder-content__err\"]}>\n          빈값을 저장할 수 없으며, 상품가격과 상품 할인률에 문자를 입력할 수\n          없습니다.\n        </p>\n      )}\n\n      <div className={classes[\"subOrder-content__update\"]}>\n        {!isUpdate ? (\n          <button onClick={() => setIsUpdate(true)}>수정</button>\n        ) : (\n          <button onClick={handleUpdate}>저장</button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SubProducts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}