{"ast":null,"code":"import _regeneratorRuntime from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{getUser}from\"./getUser\";export var handleLogout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:5000/login/api/logout\",{withCredentials:true}).then(window.location.replace(\"/\"));case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleLogout(){return _ref.apply(this,arguments);};}();export var cookieCheck=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(setIsLogin,setUser){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"http://localhost:5000/login/api/login/cookiecheck\",{withCredentials:true}).then(function(response){if(response.data===\"checkSuccess\"){setIsLogin(true);getUser(setUser);}else{setIsLogin(false);}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function cookieCheck(_x,_x2){return _ref2.apply(this,arguments);};}();export var cookieCheckLogin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(setIsLogin){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"http://localhost:5000/login/api/login/cookiecheck\",{withCredentials:true}).then(function(response){if(response.data===\"checkSuccess\"){setIsLogin(true);}else{setIsLogin(false);}});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function cookieCheckLogin(_x3){return _ref3.apply(this,arguments);};}();export var authCheck=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get(\"http://localhost:5000/login/api/login/success\",{withCredentials:true}).then(function(response){if(response.data===\"timeout\"){handleLogout();}});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function authCheck(){return _ref4.apply(this,arguments);};}();export var getUserName=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(setUserName){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.get(\"http://localhost:5000/login/api/login/getusername\",{withCredentials:true}).then(function(response){// setUser(response.data);\nsetUserName(response.data);});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function getUserName(_x4){return _ref5.apply(this,arguments);};}();","map":{"version":3,"names":["axios","getUser","handleLogout","get","withCredentials","then","window","location","replace","cookieCheck","setIsLogin","setUser","response","data","cookieCheckLogin","authCheck","getUserName","setUserName"],"sources":["/Users/baejunho/Desktop/nanas_homepage/nanas-shoppingMall/client/src/util/authCheck.js"],"sourcesContent":["import axios from \"axios\";\nimport { getUser } from \"./getUser\";\n\nexport const handleLogout = async () => {\n  await axios\n    .get(\"http://localhost:5000/login/api/logout\", {\n      withCredentials: true,\n    })\n    .then(window.location.replace(\"/\"));\n};\nexport const cookieCheck = async (setIsLogin, setUser) => {\n  await axios\n    .get(\"http://localhost:5000/login/api/login/cookiecheck\", {\n      withCredentials: true,\n    })\n    .then((response) => {\n      if (response.data === \"checkSuccess\") {\n        setIsLogin(true);\n        getUser(setUser);\n      } else {\n        setIsLogin(false);\n      }\n    });\n};\nexport const cookieCheckLogin = async (setIsLogin) => {\n  await axios\n    .get(\"http://localhost:5000/login/api/login/cookiecheck\", {\n      withCredentials: true,\n    })\n    .then((response) => {\n      if (response.data === \"checkSuccess\") {\n        setIsLogin(true);\n      } else {\n        setIsLogin(false);\n      }\n    });\n};\nexport const authCheck = async () => {\n  await axios\n    .get(\"http://localhost:5000/login/api/login/success\", {\n      withCredentials: true,\n    })\n    .then((response) => {\n      if (response.data === \"timeout\") {\n        handleLogout();\n      }\n    });\n};\n\nexport const getUserName = async (setUserName) => {\n  await axios\n    .get(\"http://localhost:5000/login/api/login/getusername\", {\n      withCredentials: true,\n    })\n    .then((response) => {\n      // setUser(response.data);\n      setUserName(response.data);\n    });\n};\n"],"mappings":"4TAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,WAAW,CAEnC,MAAO,IAAMC,aAAY,4FAAG,2JACpBF,MAAK,CACRG,GAAG,CAAC,wCAAwC,CAAE,CAC7CC,eAAe,CAAE,IACnB,CAAC,CAAC,CACDC,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,GAAG,CAAC,CAAC,uDACtC,kBANYN,aAAY,0CAMxB,CACD,MAAO,IAAMO,YAAW,6FAAG,kBAAOC,UAAU,CAAEC,OAAO,+IAC7CX,MAAK,CACRG,GAAG,CAAC,mDAAmD,CAAE,CACxDC,eAAe,CAAE,IACnB,CAAC,CAAC,CACDC,IAAI,CAAC,SAACO,QAAQ,CAAK,CAClB,GAAIA,QAAQ,CAACC,IAAI,GAAK,cAAc,CAAE,CACpCH,UAAU,CAAC,IAAI,CAAC,CAChBT,OAAO,CAACU,OAAO,CAAC,CAClB,CAAC,IAAM,CACLD,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAC,yDACL,kBAbYD,YAAW,iDAavB,CACD,MAAO,IAAMK,iBAAgB,6FAAG,kBAAOJ,UAAU,+IACzCV,MAAK,CACRG,GAAG,CAAC,mDAAmD,CAAE,CACxDC,eAAe,CAAE,IACnB,CAAC,CAAC,CACDC,IAAI,CAAC,SAACO,QAAQ,CAAK,CAClB,GAAIA,QAAQ,CAACC,IAAI,GAAK,cAAc,CAAE,CACpCH,UAAU,CAAC,IAAI,CAAC,CAClB,CAAC,IAAM,CACLA,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAC,yDACL,kBAZYI,iBAAgB,8CAY5B,CACD,MAAO,IAAMC,UAAS,6FAAG,iKACjBf,MAAK,CACRG,GAAG,CAAC,+CAA+C,CAAE,CACpDC,eAAe,CAAE,IACnB,CAAC,CAAC,CACDC,IAAI,CAAC,SAACO,QAAQ,CAAK,CAClB,GAAIA,QAAQ,CAACC,IAAI,GAAK,SAAS,CAAE,CAC/BX,YAAY,EAAE,CAChB,CACF,CAAC,CAAC,yDACL,kBAVYa,UAAS,2CAUrB,CAED,MAAO,IAAMC,YAAW,6FAAG,kBAAOC,WAAW,+IACrCjB,MAAK,CACRG,GAAG,CAAC,mDAAmD,CAAE,CACxDC,eAAe,CAAE,IACnB,CAAC,CAAC,CACDC,IAAI,CAAC,SAACO,QAAQ,CAAK,CAClB;AACAK,WAAW,CAACL,QAAQ,CAACC,IAAI,CAAC,CAC5B,CAAC,CAAC,yDACL,kBATYG,YAAW,8CASvB"},"metadata":{},"sourceType":"module"}